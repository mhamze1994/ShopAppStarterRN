var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ApiResponseListener=exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var ApiClient=function(){function ApiClient(){(0,_classCallCheck2.default)(this,ApiClient);}(0,_createClass2.default)(ApiClient,[{key:"call",value:function call(route,method,listener){var url,response,json,code;return _regenerator.default.async(function call$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url=ApiClient.baseUrl+route;listener.setInfo(url,method);_context.next=5;return _regenerator.default.awrap(fetch(url,{method:method,headers:{Accept:'application/json','Content-Type':'application/json'}}));case 5:response=_context.sent;_context.next=8;return _regenerator.default.awrap(response.json());case 8:json=_context.sent;code=response.status;if(this.isSuccessful(code)){listener.onSuccess(code,json);}else{listener.onFailed(code,json);}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context["catch"](0);listener.onError(_context.t0);case 16:case"end":return _context.stop();}}},null,this,[[0,13]],Promise);}},{key:"isSuccessful",value:function isSuccessful(code){return code>=200&&code<300;}}],[{key:"getInstance",value:function getInstance(){if(ApiClient.myInstance==null){ApiClient.myInstance=new ApiClient();}return this.myInstance;}}]);return ApiClient;}();exports.default=ApiClient;ApiClient.myInstance=null;ApiClient.baseUrl="https://reqres.in/api/";var ApiResponseListener=function(){function ApiResponseListener(){(0,_classCallCheck2.default)(this,ApiResponseListener);}(0,_createClass2.default)(ApiResponseListener,[{key:"onSuccess",value:function onSuccess(code,response){console.log("Success on "+this.method+" : "+this.route+" -> code :"+code);}},{key:"onFailed",value:function onFailed(code,response){console.log("Failed on "+this.method+" : "+this.route+" -> code :"+code);}},{key:"onError",value:function onError(error){console.log("Error on "+this.method+" : "+this.route+" -> "+error);}},{key:"setInfo",value:function setInfo(route,method){this.route=route;this.method=method;}}]);return ApiResponseListener;}();exports.ApiResponseListener=ApiResponseListener;